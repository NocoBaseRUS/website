# SQL Таблица

<PluginInfo name="collection-sql"></PluginInfo>

## Введение

SQL collection предоставляет метод получения данных с помощью SQL-запросов. После получения полей данных через SQL-запрос и настройки метаданных полей пользователи могут использовать их так же, как обычные таблицы — в таблицах, диаграммах, рабочих процессах и т.д. Это особенно полезно для сценариев, связанных с объединением запросов и статистикой.

## Руководство по использованию

### Создание

<img src="https://static-docs.nocobase.com/202405191452918"/>

<p>1. Введите SQL-запрос в поле ввода SQL и нажмите «Выполнить» (Execute). Система попытается проанализировать, какие таблицы и поля используются в SQL, и извлечь метаданные полей из исходных таблиц.</p>

<img src="https://static-docs.nocobase.com/202405191453556"/>

<p>2. Если автоматически определенные системой исходные таблицы и поля неверны, вы можете вручную выбрать соответствующие таблицы и поля, чтобы использовать метаданные этих полей. Сначала нужно выбрать исходную таблицу, чтобы иметь возможность выбрать поля этой таблицы в разделе источников полей ниже.</p>

<img src="https://static-docs.nocobase.com/202405191453579"/>

<p>3. Если у поля нет соответствующего исходного поля, система определит тип поля на основе типа данных. Если результат определения неверен, можно вручную выбрать тип поля.</p>

<img src="https://static-docs.nocobase.com/202405191454703"/>

<p>4. При настройке полей вы можете видеть соответствующий предварительный просмотр в области просмотра.</p>

<img src="https://static-docs.nocobase.com/202405191455439"/>

<p>5. После завершения настройки и проверки правильности необходимо нажать кнопку подтверждения (Confirm) под полем ввода SQL, чтобы отправить изменения.</p>

<img src="https://static-docs.nocobase.com/202405191455302"/>

### Редактирование

1. Если SQL-запрос изменился, вы можете нажать кнопку редактирования (Edit), чтобы изменить SQL-запрос и повторно настроить поля.

2. Для изменения метаданных полей используйте функцию настройки полей (Configure fields), чтобы изменять конфигурацию полей так же, как в обычной таблице.

### Синхронизация

Если SQL-запрос не изменился, но структура таблицы базы данных изменилась, вы можете синхронизировать и настроить поля, нажав «Настройка полей» (Configure fields) — «Синхронизация с базой данных» (Sync from database).

<img src="https://static-docs.nocobase.com/202405191456216"/>

### Сравнение SQL-таблицы и подключенной базы данных представлений (View)

| Тип шаблона         | Применяемые сценарии                                                                                     | Принцип реализации   | Поддержка операций добавления, удаления, изменения |
|--------------------|--------------------------------------------------------------------------------------------------------|---------------------|--------------------------------------------------|
| SQL               | Простая модель, легковесные сценарии<br />Неудобство работы напрямую с базой данных<br />Нежелание поддерживать представления<br />Полное управление через UI | SQL подзапрос        | Не поддерживается                                |
| Подключение View  | Сложная модель<br />Требуется взаимодействие с базой данных<br />Необходимость изменения данных<br />Лучшая и более стабильная поддержка базы данных | Представление базы данных | Частично поддерживается                          |

:::warning
При использовании SQL-таблиц выбирайте таблицы, управляемые в NocoBase. Если это другие таблицы в той же базе данных, которые не подключены к NocoBase, это может привести к неточному разбору SQL-запросов. В таких случаях рекомендуется создать представление (view) и подключить его.  
:::
:::
