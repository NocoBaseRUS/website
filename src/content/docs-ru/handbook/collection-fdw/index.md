# Подключение внешних таблиц (FDW)

<PluginInfo name="collection-fdw"></PluginInfo>

## Введение

Плагин функций для подключения удаленных таблиц на основе **foreign data wrapper** базы данных. В настоящее время поддерживаются базы данных MySQL и PostgreSQL.

:::info{title="Подключение источника данных vs Подключение внешних таблиц"}
- **Подключение источника данных** означает установление соединения с конкретной базой данных или API-сервисом, позволяя использовать все возможности базы данных или предоставляемые API-услуги;
- **Подключение внешних таблиц** означает получение данных извне и их отображение для локального использования. В базе данных это называется FDW (**Foreign Data Wrapper**) — технология базы данных, которая позволяет использовать удаленные таблицы как локальные. Таблицы подключаются по одной. Поскольку осуществляется удаленное подключение, при использовании могут возникать различные ограничения.

Эти два подхода также могут использоваться совместно: первый используется для установления соединения с источником данных, а второй — для доступа к данным между источниками. Например, если подключен источник данных PostgreSQL, в котором определенная таблица создана как внешняя таблица на основе FDW.
:::

### MySQL

MySQL использует механизм `federated`, который требует активации. Он поддерживает подключение к удаленной базе данных MySQL и совместимым протоколам, таким как MariaDB. Более подробную документацию см. в разделе [Federated Storage Engine](https://dev.mysql.com/doc/refman/8.0/en/federated-storage-engine.html).

### PostgreSQL

В PostgreSQL можно использовать различные типы расширений `fdw` для поддержки различных типов удаленных данных. В настоящее время поддерживаются следующие расширения:

- [postgres_fdw](https://www.postgresql.org/docs/current/postgres-fdw.html): Используется для подключения к удаленной базе данных PostgreSQL из PostgreSQL.
- [mysql_fdw(в разработке)](https://github.com/EnterpriseDB/mysql_fdw): Используется для подключения к удаленной базе данных MySQL из PostgreSQL.
- Другие типы расширений fdw можно найти в разделе [PostgreSQL Foreign Data Wrappers](https://wiki.postgresql.org/wiki/Foreign_data_wrappers). Для интеграции с NocoBase необходимо реализовать соответствующие адаптеры в коде.

## Установка

# Предварительные условия

- Если основная база данных NocoBase работает на MySQL, необходимо активировать `federated`. См. [Как включить движок federated в MySQL](./enable-federated.md).

Затем установите и активируйте плагин через менеджер плагинов.

![Установка и активация плагина](https://static-docs.nocobase.com/f84276c5712851fb3ff33af3f1ff0f59.png)

## Руководство по использованию

В разделе «Управление таблицами > Создать таблицу» выпадающем меню выберите «Подключение внешних данных».

![Подключение внешних данных](https://static-docs.nocobase.com/029d946a6d067d1c35a39755219d623c.png)

В выпадающем списке «Служба базы данных» выберите существующую службу базы данных или создайте новую, выбрав «Создать службу базы данных».

![Служба базы данных](https://static-docs.nocobase.com/766271708a911950a5599d60d6be4a4d.png)

Создание службы базы данных.

![Создание службы базы данных](https://static-docs.nocobase.com/1e357216e04cc4f200bd6212827281c8.png)

После выбора службы базы данных в выпадающем списке «Удаленные таблицы» выберите таблицу, к которой нужно подключиться.

![Выбор таблицы для подключения](https://static-docs.nocobase.com/e91fd6152b52b4fc01b3808053cc8dc4.png)

Настройте информацию о полях.

![Настройка информации о полях](https://static-docs.nocobase.com/e618fecc5fe327f6a495e61405e5f040.png)

Если структура удаленной таблицы изменилась, вы можете выполнить «Синхронизацию с удаленной таблицей».

![Синхронизация с удаленной таблицей](https://static-docs.nocobase.com/3751a9a39f933889fb3fcc4d85a6f4ad.png)

Синхронизация удаленной таблицы.

![Синхронизация удаленной таблицы](https://static-docs.nocobase.com/13f18200e31ea223fdd8dadaff1e9d28.png)

Наконец, данные будут отображены в интерфейсе.

![Отображение в интерфейсе](https://static-docs.nocobase.com/368fca27a99277d9360ca81350949357.png)