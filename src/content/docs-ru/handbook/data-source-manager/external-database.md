# Внешняя база данных

## Введение

Использование существующей внешней базы данных в качестве источника данных. На данный момент поддерживаются следующие внешние базы данных: MySQL, MariaDB и PostgreSQL.

## Инструкция по использованию

### Добавление внешней базы данных

После активации плагина можно выбрать и добавить внешнюю базу данных из выпадающего меню "Add new" в управлении источниками данных.

![20240507204316](https://static-docs.nocobase.com/20240507204316.png)

Заполните информацию о подключаемой базе данных.

![20240507204820](https://static-docs.nocobase.com/20240507204820.png)

### Синхронизация таблиц данных

После установления соединения с внешней базой данных будут автоматически загружены все таблицы данных из источника. Напрямую добавлять или изменять структуру таблиц во внешней базе данных не поддерживается. Если требуется внести изменения, это можно сделать через клиент базы данных, а затем нажать кнопку "Обновить" в интерфейсе для синхронизации.

![20240507204725](https://static-docs.nocobase.com/20240507204725.png)

### Настройка полей

Внешняя база данных автоматически считывает поля существующих таблиц данных и отображает их. Можно быстро просмотреть и настроить заголовки полей, типы данных (Field type) и типы интерфейса (Field interface). Также можно нажать кнопку "Редактировать", чтобы изменить дополнительные настройки.

![20240507210537](https://static-docs.nocobase.com/20240507210537.png)

Поскольку внешняя база данных не поддерживает изменение структуры таблиц, при добавлении нового поля доступны только типы отношений. Поля отношений не являются реальными полями, они используются для установления связей между таблицами.

![20240507220140](https://static-docs.nocobase.com/20240507220140.png)

Более подробная информация доступна в разделе [Поля таблиц данных / Обзор](/handbook/data-modeling/collection-fields).

### Сопоставление типов полей

NocoBase автоматически сопоставляет типы полей внешней базы данных с соответствующими типами данных (Field type) и типами интерфейса (Field Interface).

- **Тип данных (Field type)**: Используется для определения типа, формата и структуры данных, которые могут храниться в поле;
- **Тип интерфейса (Field interface)**: Определяет тип элемента управления, используемого для отображения и ввода значений поля в пользовательском интерфейсе.

| PostgreSQL | MySQL/MariaDB | Тип данных NocoBase | Тип интерфейса NocoBase |
| - | - | - | - |
| BOOLEAN | BOOLEAN<br/>TINYINT(1) | boolean | чекбокс <br/> переключатель |
| SMALLINT<br/>INTEGER<br/>SERIAL<br/>SMALLSERIAL | TINYINT<br/>SMALLINT<br/>MEDIUMINT<br/>INTEGER | integer<br/>boolean<br/>сортировка | целое число<br/>сортировка<br/>чекбокс<br/>переключатель<br/>выпадающий список<br/>радиогруппа |
| BIGINT<br/>BIGSERIAL | BIGINT | bigInt<br/>сортировка | целое число<br/>сортировка<br/>чекбокс<br/>переключатель<br/>выпадающий список<br/>радиогруппа<br/>UNIX временная метка<br/>дата создания<br/>дата обновления |
| REAL | FLOAT | float | число<br/>процент |
| DOUBLE PRECISION | DOUBLE PRECISION | double | число<br/>процент |
| DECIMAL<br/>NUMERIC | DECIMAL | decimal | число<br/>процент<br/>валюта |
| VARCHAR<br/>CHAR | VARCHAR<br/>CHAR | строка<br/>пароль<br/>UUID<br/>NanoID | текстовое поле<br/>email<br/>телефон<br/>пароль<br/>цвет<br/>икона<br/>выпадающий список<br/>радиогруппа<br/>UUID<br/>NanoID |
| TEXT | TEXT<br/>TINYTEXT<br/>MEDIUMTEXT<br/>LONGTEXT | текст<br/>JSON | многострочное текстовое поле<br/>Markdown<br/>Vditor<br/>форматированный текст<br/>URL<br/>JSON |
| UUID | - | UUID | UUID |
| JSON<br/>JSONB | JSON | JSON | JSON |
| TIMESTAMP | DATETIME<br/>TIMESTAMP | дата | дата<br/>время<br/>дата создания<br/>дата обновления |
| DATE | DATE | только дата | дата/время |
| TIME | TIME | время | время |
| - | YEAR |  | дата/время |
| CIRCLE |  | круг | JSON<br/>круг |
| PATH<br/>GEOMETRY(LINESTRING) | LINESTRING | линия | JSON<br/>линия |
| POINT<br/>GEOMETRY(POINT) | POINT | точка | JSON<br/>точка |
| POLYGON<br/>GEOMETRY(POLYGON) | POLYGON | многоугольник | JSON<br/>многоугольник |
| GEOMETRY | GEOMETRY |  -  |  -  |
| BLOB | BLOB | двоичный объект |  -  |
| ENUM | ENUM | enum | выпадающий список<br/>радиогруппа |
| ARRAY |  -  | массив | множественный выбор<br/>группа чекбоксов |
| BIT | BIT | - | - |
| SET | SET | набор | множественный выбор<br/>группа чекбоксов |
| RANGE | - | - | - |

### Неподдерживаемые типы полей

Неподдерживаемые типы полей отображаются отдельно. Эти поля требуют адаптации разработчиками для использования.

![20240507221854](https://static-docs.nocobase.com/20240507221854.png)

### Фильтрация по ключу цели

Для таблиц данных, используемых в блоках отображения, необходимо настроить фильтрацию по ключу цели (Filter target key). Ключ фильтрации указывает на поле, по которому будут фильтроваться данные, и его значения должны быть уникальными. По умолчанию ключом фильтрации является первичный ключ таблицы. Если это представление (view), таблица без первичного ключа или таблица с составным первичным ключом, необходимо настроить пользовательский ключ фильтрации.

![20240507210230](https://static-docs.nocobase.com/20240507210230.png)

Только таблицы данных с настроенным ключом фильтрации могут быть добавлены на страницу.

![20240507222827](https://static-docs.nocobase.com/20240507222827.png)