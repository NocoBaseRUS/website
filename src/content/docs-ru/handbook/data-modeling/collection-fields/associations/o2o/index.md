# Отношение "один к одному"

Отношение между сотрудником и его личными данными: каждый сотрудник может иметь только одну запись с личными данными, и каждая запись с личными данными может соответствовать только одному сотруднику. В этом случае между сотрудником и его личными данными существует отношение "один к одному".

Внешний ключ для отношения "один к одному" можно разместить как в исходной, так и в целевой таблице. Если связь выражает "имеет один", то внешний ключ лучше разместить в целевой таблице. Если связь выражает "принадлежность", то внешний ключ лучше разместить в исходной таблице.

Например, в описанном выше случае у сотрудника есть только одна запись с личными данными, а личные данные принадлежат сотруднику, поэтому внешний ключ лучше разместить в таблице личных данных.

## Отношение "один к одному" (имеет один)

Выражает, что у сотрудника есть одна запись с личными данными.

ER-диаграмма:

![alt text](https://static-docs.nocobase.com/4359e128936bbd7c9ff51bcff1d646dd.png)

Настройка полей:

![alt text](https://static-docs.nocobase.com/7665a87e094b4fb50c9426a108f87105.png)

## Отношение "один к одному" (принадлежность)

Выражает, что запись с личными данными принадлежит сотруднику.

ER-диаграмма:

![](https://static-docs.nocobase.com/31e7cc3e630220cf1e98753ca24ac72d.png)

Настройка полей:

![alt text](https://static-docs.nocobase.com/4f09eeb3c7717d61a349842da43c187c.png)

## Пояснение параметров

### Source collection (Исходная коллекция)

Исходная таблица — это таблица, в которой находится текущее поле.

### Target collection (Целевая коллекция)

Целевая таблица — с какой таблицей устанавливается связь.

### Foreign key (Внешний ключ)

Используется для установления связи между двумя таблицами. В случае отношения "один к одному" внешний ключ можно разместить как в исходной, так и в целевой таблице. Если связь выражает "имеет один", то внешний ключ лучше разместить в целевой таблице. Если связь выражает "принадлежность", то внешний ключ лучше разместить в исходной таблице.

### Source key <- Foreign key (внешний ключ в целевой таблице)

Поле, на которое ссылается внешний ключ. Должно быть уникальным. Когда внешний ключ размещается в целевой таблице, это выражает "имеет один".

### Target key <- Foreign key (внешний ключ в исходной таблице)

Поле, на которое ссылается внешний ключ. Должно быть уникальным. Когда внешний ключ размещается в исходной таблице, это выражает "принадлежность".

### ON DELETE

ON DELETE определяет действие, выполняемое над внешними ключами в дочерней таблице при удалении записи из родительской таблицы. Это правило задается при определении внешнего ключа. Распространенные варианты ON DELETE включают:

- CASCADE: При удалении записи из родительской таблицы автоматически удаляются все связанные записи в дочерней таблице.
- SET NULL: При удалении записи из родительской таблицы соответствующие внешние ключи в дочерней таблице устанавливаются в NULL.
- RESTRICT: Значение по умолчанию. Если в дочерней таблице существуют связанные записи, удаление записи из родительской таблицы запрещено.
- NO ACTION: Аналогично RESTRICT. Если в дочерней таблице существуют связанные записи, удаление записи из родительской таблицы запрещено.