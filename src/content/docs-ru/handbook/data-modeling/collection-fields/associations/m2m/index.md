# Многие ко многим

В системе выбора курсов есть две сущности: студенты и курсы. Один студент может выбрать несколько курсов, а один курс может быть выбран несколькими студентами. Это образует отношение «многие ко многим». В реляционной базе данных для представления связи между студентами и курсами обычно используется промежуточная таблица, например, таблица выбора курсов. Эта таблица может записывать, какие курсы выбрал каждый студент, и какие студенты выбрали каждый курс. Такая структура хорошо отражает связь «многие ко многим» между студентами и курсами.

ER-диаграмма:

![alt text](https://static-docs.nocobase.com/0e9921228e1ee375dc639431bb89782c.png)

Настройка полей:

![alt text](https://static-docs.nocobase.com/8e2739ac5d44fb46f30e2da42ca87a82.png)

## Пояснение параметров

### Source collection (Исходная коллекция)

Исходная таблица — это таблица, в которой находится текущее поле.

### Target collection (Целевая коллекция)

Целевая таблица — с какой таблицей устанавливается связь.

### Through collection (Промежуточная коллекция)

Промежуточная таблица. Когда между двумя сущностями существует связь «многие ко многим», используется промежуточная таблица для хранения этой связи. Промежуточная таблица содержит два внешних ключа, которые сохраняют связь между двумя сущностями.

### Source key (Исходный ключ)

Поле, на которое ссылается внешний ключ. Должно быть уникальным.

### Foreign key 1 (Внешний ключ 1)

Поле в промежуточной таблице, которое создает связь с исходной таблицей.

### Foreign key 2 (Внешний ключ 2)

Поле в промежуточной таблице, которое создает связь с целевой таблицей.

### Target key (Целевой ключ)

Поле, на которое ссылается внешний ключ. Должно быть уникальным.

### ON DELETE

ON DELETE определяет действие, выполняемое над внешними ключами в дочерней таблице при удалении записи из родительской таблицы. Это правило задается при определении внешнего ключа. Распространенные варианты ON DELETE включают:

- CASCADE: При удалении записи из родительской таблицы автоматически удаляются все связанные записи в дочерней таблице.
- SET NULL: При удалении записи из родительской таблицы соответствующие внешние ключи в дочерней таблице устанавливаются в NULL.
- RESTRICT: Значение по умолчанию. Если в дочерней таблице существуют связанные записи, удаление записи из родительской таблицы запрещено.
- NO ACTION: Аналогично RESTRICT. Если в дочерней таблице существуют связанные записи, удаление записи из родительской таблицы запрещено.