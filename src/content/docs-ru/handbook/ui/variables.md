# Переменные

## Введение
При настройке области данных блока, значений по умолчанию для полей, правил взаимодействия и рабочих процессов можно использовать переменные.

Типы переменных включают:
- Текущий пользователь
- Текущая роль
- Текущая форма
- Текущий объект
- Текущая запись
- Текущая запись во всплывающем окне
- Выбранные записи в таблице
- Переменные даты

## Текущий пользователь

Пользователь, который в данный момент авторизован в системе.

![20240416154950](https://static-docs.nocobase.com/20240416154950.png)

## Текущая роль (идентификатор)

Идентификатор роли (role name) текущего пользователя.

![20240416155100](https://static-docs.nocobase.com/20240416155100.png)

## Текущая форма

Текущие значения формы в реальном времени (form.values), применимые только для блоков формы. Сценарии использования включают:

- Правила взаимодействия для текущей формы
- Значения по умолчанию для полей формы (действительно только при добавлении новых данных)
- Настройка области данных для полей отношений
- Настройка присвоения значений полям при отправке формы

### Правила взаимодействия для текущей формы

![20240416170732_rec_](https://static-docs.nocobase.com/20240416170732_rec_.gif)

### Значения по умолчанию для полей формы (действительно только при добавлении новых данных)

![20240416171129_rec_](https://static-docs.nocobase.com/20240416171129_rec_.gif)

### Настройка области данных для полей отношений

Используется для обработки взаимодействий между связями, например:

![20240416171743_rec_](https://static-docs.nocobase.com/20240416171743_rec_.gif)

### Настройка присвоения значений полям при отправке формы

![20240416171215_rec_](https://static-docs.nocobase.com/20240416171215_rec_.gif)

## Текущий объект

Представляет значение встроенного поля связи.

Пример: для связи "один-к-одному" существует только один объект (object).

```js
// Текущая форма
{
  username: 'user1',
  profile: {
    // Для полей в объекте profile, сам объект profile является текущим объектом
    age: 30,
  }
}

Пример: для многосвязности, есть несколько объектов (objects)


// Текущая форма
{
  title: 'title1',
  tags: [
    {
      // Для полей в объекте tag, сам объект tag1 является текущим объектом
      name: 'tag1',
    },
    {
      // Для полей в объекте tag, сам объект tag2 является текущим объектом
      name: 'tag2',
    },
  ]
}
```

### Только для конфигурации подформ и подтаблиц в блоках форм:

- Значения по умолчанию для подполей
- Диапазон данных для связанных подполей

### Значения по умолчанию для подполей

![20240416172933_rec_](https://static-docs.nocobase.com/20240416172933_rec_.gif)

### Диапазон данных для связанных подполей

![20240416173043_rec_](https://static-docs.nocobase.com/20240416173043_rec_.gif)

## Текущая запись

Запись — это строка в таблице данных, каждая строка представляет одну запись. В правилах синхронизации для операций со строками в блоках отображения используется переменная «Текущая запись».

:::warning
Для избежания путаницы пользователей в блоках форм нет переменной «Текущая запись». Пожалуйста, используйте «Текущую форму».
:::

### Правила синхронизации для операций со строками

![20240416174813_rec_](https://static-docs.nocobase.com/20240416174813_rec_.gif)

## Текущая запись всплывающего окна

Операции с всплывающими окнами играют важную роль в конфигурации интерфейса NocoBase.

- Всплывающее окно для операций со строками: каждое всплывающее окно имеет переменную «Текущая запись всплывающего окна», которая указывает на текущую строку.
- Всплывающее окно для связанных полей: каждое всплывающее окно имеет переменную «Текущая запись всплывающего окна», которая указывает на текущую связанную запись.

В блоках внутри всплывающих окон можно использовать переменную «Текущая запись всплывающего окна». Сценарии использования включают:

- Конфигурирование диапазона данных для блоков
- Конфигурирование диапазона данных для связанных полей
- Конфигурирование значений по умолчанию для полей (новых данных в форме)
- Конфигурирование правил синхронизации для операций
- Конфигурирование назначения значений для полей при отправке формы

### Конфигурирование диапазона данных для блоков

![20240416224307_rec_](https://static-docs.nocobase.com/20240416224307_rec_.gif)

### Конфигурирование диапазона данных для связанных полей

![20240416224641_rec_](https://static-docs.nocobase.com/20240416224641_rec_.gif)

### Конфигурирование значений по умолчанию для полей (новых данных в форме)

![20240416223846_rec_](https://static-docs.nocobase.com/20240416223846_rec_.gif)

### Конфигурирование правил синхронизации для операций

![20240416223101_rec_](https://static-docs.nocobase.com/20240416223101_rec_.gif)

### Конфигурирование назначения значений для полей при отправке формы

![20240416224014_rec_](https://static-docs.nocobase.com/20240416224014_rec_.gif)

## Выделенные записи в таблице

В настоящее время используется только для конфигурации значений по умолчанию полей формы для операции «Добавить запись» в блоках таблиц.

### Значения по умолчанию для полей формы при операции "Добавить запись"

## Родительская запись (устаревший)

Используется только в блоках связей, обозначает исходную запись данных связи.

:::warning
«Родительская запись» устарела, рекомендуется использовать эквивалентную «Текущую запись всплывающего окна».
:::

## Переменные даты

Связанные переменные:

- Текущее время (Current time)
- Вчера (Yesterday)
- Сегодня (Today)
- Завтра (Tomorrow)
- Прошлая неделя (Last week)
- Текущая неделя (This week)
- Следующая неделя (Next week)
- Прошлый месяц (Last month)
- Текущий месяц (This month)
- Следующий месяц (Next month)
- Прошлый квартал (Last quarter)
- Текущий квартал (This quarter)
- Следующий квартал (Next quarter)
- Прошлый год (Last year)
- Текущий год (This year)
- Следующий год (Next year)
- Последние 7 дней (Last 7 days)
- Следующие 7 дней (Next 7 days)
- Последние 30 дней (Last 30 days)
- Следующие 30 дней (Next 30 days)
- Последние 90 дней (Last 90 days)
- Следующие 90 дней (Next 90 days)

<br />

:::warning
Кроме текущего времени (Current time), все остальные переменные дат являются временными периодами.
:::

Сценарии использования включают:

- Установка условий для датовых полей в диапазоне данных блоков
- Установка условий для датовых полей в диапазоне данных связанных полей
- Установка условий для датовых полей в правилах синхронизации операций
- Установка значений по умолчанию для датовых полей

### Установка условий для датовых полей в диапазоне данных блоков

### Установка условий для датовых полей в диапазоне данных связанных полей

### Установка условий для датовых полей в правилах синхронизации операций

### Установка значений по умолчанию для датовых полей