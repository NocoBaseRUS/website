# Аутентификация: SAML 2.0

## Введение

Плагин аутентификации: SAML 2.0 следует стандарту протокола SAML 2.0 (Security Assertion Markup Language 2.0) и позволяет пользователям входить в NocoBase с использованием учетных записей, предоставленных сторонними поставщиками удостоверений (IdP).

## Активация плагина

![](https://static-docs.nocobase.com/6a12f3d8073c47532a4f8aac900e4296.png)

## Добавление аутентификации SAML

Перейдите на страницу управления плагином аутентификации пользователей.

![20240615010115](https://static-docs.nocobase.com/20240615010115.png)

Добавить - SAML

![](https://static-docs.nocobase.com/5076fe56086b7799be308bbaf7c4425d.png)

## Настройка

![](https://static-docs.nocobase.com/976b66e589973c322d81dcddd22c6146.png)

- SSO URL — предоставляется IdP, используется для единого входа.
- Публичный ключ (Public Certificate) — предоставляется IdP.
- Идентификатор сущности (IdP Issuer) — необязательно, предоставляется IdP.
- http — если ваше приложение NocoBase использует протокол http, отметьте этот пункт.
- Use this field to bind the user — поле для сопоставления и привязки к существующему пользователю, можно выбрать электронную почту или имя пользователя, по умолчанию используется email. Требуется, чтобы информация о пользователе от IdP содержала поля `email` или `username`.
- Sign up automatically when the user does not exist — автоматическое создание нового пользователя, если не найдено подходящего существующего пользователя для привязки.
- Использование (Usage) — `SP Issuer / EntityID` и `ACS URL` используются для копирования и заполнения в соответствующих настройках IdP.

## Сопоставление полей

Сопоставление полей должно быть настроено на платформе конфигурации IdP, см. [пример](../auth-saml/example/google.md).

Доступные для сопоставления поля в NocoBase:

- email (обязательно)
- телефон (только для платформ, поддерживающих scope `phone`, таких как Alibaba Cloud, Feishu)
- никнейм
- имя пользователя
- имя
- фамилия

`nameID` передается протоколом SAML, его не нужно сопоставлять, оно будет сохранено как уникальный идентификатор пользователя.
Приоритет правил для нового псевдонима пользователя: `nickname` > `firstName lastName` > `username` > `nameID`
На данный момент сопоставление организаций и ролей пользователей не поддерживается.

## Вход

Перейдите на страницу входа и нажмите кнопку под формой входа для инициации входа через сторонний сервис.

![](https://static-docs.nocobase.com/74963865c9d36a294948e6adeb5b24bc.png)