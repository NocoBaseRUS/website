# Сообщение отклика

<PluginInfo name="workflow-response-message" link="/handbook/workflow/plugins/response-message" commercial="true"></PluginInfo>

Узел "Сообщение отклика" используется для отправки клиенту, выполняющему операцию, настраиваемых сообщений в процессах определённого типа.

:::info{title=Примечание}
На данный момент поддерживается использование в рабочих процессах типов "Событие пользовательской операции", "Событие после операции" и "Событие перед операцией" в синхронном режиме.
:::

<embed src="../../../_partials/commercial-installation.md"></embed>

## Руководство по использованию

### Создание узла

В поддерживаемых типах рабочих процессов узел "Сообщение отклика" можно добавить в любое место процесса. Нажмите кнопку плюс ("+") в процессе, чтобы добавить узел "Сообщение отклика":

![Добавление узла](https://static-docs.nocobase.com/eac2b3565e95e4ce59f340624062ed3d.png)

Сообщения отклика существуют в виде массива на протяжении всего запроса. При выполнении любого узла "Сообщение отклика" новое содержимое сообщения добавляется в массив. При отправке содержимого отклика сервером все сообщения будут отправлены клиенту одновременно.

### Настройка узла

Содержимое сообщения представляет собой шаблонную строку, в которую можно вставлять переменные. В настройках узла можно свободно организовать содержимое этого шаблона:

![Настройка узла](https://static-docs.nocobase.com/d5fa5f4002d50baf3ba16048818fddfc.png)

При выполнении процесса до этого узла шаблон будет разобран, и будет сгенерирован результат содержимого сообщения. В приведённой выше конфигурации переменная "Локальная переменная / Цикл по всем продуктам / Объект цикла / Продукт / Название" будет заменена на конкретное значение в реальном процессе, например:

```
Недостаточно запасов продукта "iPhone 14 pro"
```

![Содержимое сообщения](https://static-docs.nocobase.com/06bd4a6b6ec499c853f0c39987f63a6a.png)

### Сценарии использования

#### Процесс "Событие перед операцией"

Использование сообщений отклика в процессе "Событие перед операцией" позволяет отправить соответствующие сообщения обратной связи клиенту после завершения процесса. Подробнее см. в разделе [Перехват запросов](../triggers/pre-action.md).

#### Процесс "Событие после операции"

В "Событии после операции" в синхронном режиме сообщение отклика будет показано клиенту после завершения процесса. В отличие от процесса "Событие перед операцией", независимо от того, с каким статусом завершился рабочий процесс (успех, неудача и т.д.), отображаемая информация всегда будет в статусе "успешно". Это связано с тем, что операция, инициировавшая процесс, была успешно завершена, а успешность выполнения привязанного рабочего процесса не влияет на результат предыдущей операции.