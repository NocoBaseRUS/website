# HTTP-запрос

<PluginInfo name="workflow-request" link="/handbook/workflow/plugins/request"></PluginInfo>

Когда требуется взаимодействие с другой веб-системой, можно использовать узел HTTP-запроса. Этот узел при выполнении отправляет HTTP-запрос на указанный адрес в соответствии с конфигурацией. Он может передавать данные в формате JSON или `application/x-www-form-urlencoded`, обеспечивая взаимодействие с внешними системами.

Если вы знакомы с такими инструментами отправки запросов, как Postman, то сможете быстро освоить использование узла HTTP-запроса. В отличие от этих инструментов, параметры узла HTTP-запроса могут использовать контекстные переменные текущего процесса, что позволяет органично интегрировать его с бизнес-логикой текущей системы.

## Установка

Встроенный плагин, установка не требуется.

## Руководство по использованию

### Создание узла

В интерфейсе конфигурации рабочего процесса нажмите кнопку плюс ("+") в процессе, чтобы добавить узел "HTTP-запрос":

![HTTP-запрос_Добавление](https://static-docs.nocobase.com/46f2a6fc3f6869c80f8fbd362a54e644.png)

### Настройка узла

![Узел HTTP-запроса_Настройка узла](https://static-docs.nocobase.com/2fcb29af66b892fa704add52e2974a52.png)

#### Метод запроса

Доступные методы HTTP-запроса: `GET`, `POST`, `PUT`, `PATCH` и `DELETE`.

#### URL запроса

URL HTTP-сервиса, который должен включать часть с протоколом (`http://` или `https://`). Рекомендуется использовать `https://`.

#### Формат данных запроса

То есть заголовок `Content-Type`. Поддерживаются два формата: `application/json` и `application/x-www-form-urlencoded`.

#### Настройка заголовков запроса

Ключи и значения заголовков (Header) запроса. Значения могут использовать переменные контекста процесса.

:::info{title=Подсказка}
Заголовок `Content-Type` уже настроен через формат данных запроса, поэтому его не нужно указывать вручную. Попытка переопределить его будет проигнорирована.
:::

#### Параметры запроса

Ключи и значения параметров запроса (query). Значения также могут использовать переменные контекста процесса.

#### Тело запроса

Тело (Body) запроса. В настоящее время поддерживается только стандартный формат JSON. Переменные из контекста процесса можно вставить с помощью кнопки переменных в правом верхнем углу текстового редактора.

:::info{title=Подсказка}
Примечание: переменные должны использоваться внутри строк JSON, например: `"a": "{{$context.data.a}}"`.
:::

#### Настройка тайм-аута

Если запрос длительное время не получает ответ, настройка тайм-аута позволяет отменить выполнение этого запроса. После истечения времени ожидания текущий процесс завершится с состоянием неудачи.

#### Игнорирование ошибок

Узел запроса считает успешными ответы с HTTP-статусами в диапазоне `200`–`299` (включительно). Все остальные статусы считаются ошибочными. Если выбрана опция "Игнорировать неудачные запросы и продолжить рабочий процесс", то даже при сбое запроса последующие узлы процесса будут выполняться.

### Использование результатов ответа

Результаты ответа HTTP-запроса могут быть проанализированы с помощью узла [JSON-анализ](./plugins/json-query.md), чтобы их можно было использовать в последующих узлах.

### Пример

Например, мы можем использовать узел запроса для интеграции с облачной платформой для отправки SMS-уведомлений. Настройка для API отправки SMS Alibaba Cloud выглядит следующим образом (рекомендуется проверить документацию для корректного применения параметров):

![Узел HTTP-запроса_Настройка узла](https://static-docs.nocobase.com/20240515124004.png)

Когда рабочий процесс активирует этот узел, он вызывает SMS-интерфейс Alibaba Cloud с указанными параметрами. В случае успешного запроса сообщение будет отправлено через облачный сервис SMS.