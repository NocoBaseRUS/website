# Триггер утверждения

## Создание процесса

При создании рабочего процесса выберите тип "Утверждение", чтобы создать процесс утверждения:

![Создание процесса утверждения](https://static-docs.nocobase.com/f52dda854f46a669e0c1c7fb487a17ea.png)

Затем на странице конфигурации рабочего процесса нажмите на триггер, чтобы открыть всплывающее окно для дополнительных настроек.

## Привязка таблицы данных

Плагин утверждений NocoBase разработан с учетом гибкости и может использоваться с любой пользовательской таблицей данных. Это означает, что при настройке утверждений не нужно повторно настраивать модель данных — можно использовать уже созданную таблицу данных. После входа в настройки триггера первой задачей будет выбор таблицы данных, чтобы определить, при создании или обновлении данных какой таблицы будет запускаться этот процесс:

![Выбор таблицы данных в настройках триггера](https://static-docs.nocobase.com/8732a4419b1e28d2752b8f601132c82d.png)

Затем привяжите этот рабочий процесс к кнопке отправки формы для создания (или редактирования) данных в соответствующей таблице данных:

![Привязка рабочего процесса](https://static-docs.nocobase.com/2872ff108c61d7bf6d0bfb19886774c6.png)

После этого отправка этой формы пользователем будет запускать соответствующий рабочий процесс утверждения. Данные, отправленные через форму, сохраняются как в соответствующей таблице данных, так и в виде снимков в потоке утверждения для последующего просмотра утверждающими лицами.

## Расположение для запуска утверждения

В пользовательском интерфейсе есть два места, где можно запустить утверждение: первое — это отправка через форму создания (или обновления) данных связанной таблицы данных, обычно предназначенная для запуска одного процесса утверждения; второе — централизованное место из блока центра утверждений, предназначенное для глобального управления процессами.

![Выбор расположения для запуска утверждения](https://static-docs.nocobase.com/1a193ec0acfa6cde221c6e5d49a50b3e.png)

При отметке опции "Можно инициировать и утверждать как в блоке данных, так и в центре утверждений" данный процесс появится в выпадающем меню кнопки "Инициировать" в блоке центра утверждений, и пользователи смогут централизованно запускать разные процессы утверждения из этого места.

## Отзыв

Если процесс утверждения позволяет инициатору отзывать заявку, можно отметить опцию "Разрешить отзыв":

![Настройка триггера утверждения — Разрешить отзыв](https://static-docs.nocobase.com/09185712fc55bc536892136ce0ade4a8.png)

После отметки этой опции инициированное утверждение может быть отозвано инициатором до того, как любой из утверждающих лиц начнет обработку. Однако после того, как любой из утверждающих лиц на последующем этапе утверждения выполнит обработку, отзыв станет невозможным.

## Настройка интерфейса формы для инициатора

Наконец, необходимо настроить интерфейс формы для инициатора. Этот интерфейс будет использоваться при отправке из блока центра утверждений или при повторной отправке после отзыва пользователем. Нажмите кнопку настройки, чтобы открыть всплывающее окно:

![Настройка формы инициатора](https://static-docs.nocobase.com/ca8b7e362d912138cf7d73bb60b37ac1.png)

Можно добавить форму заполнения, основанную на привязанной таблице данных, или текстовые инструкции (Markdown) для подсказок и руководства. Форма является обязательной для добавления, иначе инициатор не сможет выполнять действия в этом интерфейсе.

После добавления блока формы, как и в обычном интерфейсе настройки форм, можно добавлять компоненты полей соответствующей таблицы данных и свободно изменять их расположение для организации содержимого формы:

![Настройка полей формы инициатора](https://static-docs.nocobase.com/5a1e7f9c9d8de092c7b55585dad7d633.png)

В отличие от кнопки непосредственной отправки, также можно добавить кнопку операции "Сохранить черновик" для поддержки процесса временного сохранения:

![Настройка операций формы инициатора](https://static-docs.nocobase.com/2f4850d2078e94538995a9df70d3d2d1.png)