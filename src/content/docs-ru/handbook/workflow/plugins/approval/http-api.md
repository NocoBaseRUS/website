# Внешние вызовы

События утверждения могут быть инициированы не только через действия в пользовательском интерфейсе, но и с помощью вызова HTTP API.

Для утверждений, запущенных как из блока данных, так и из блока центра утверждений, можно использовать такой вызов (пример с кнопкой создания в таблице `posts`):

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' -d \
  '{
    "title": "Hello, world!",
    "content": "This is a test post."
  }'
  "http://localhost:3000/api/posts:create?triggerWorkflows=workflowKey"
```

Параметр URL `triggerWorkflows` — это ключ рабочего процесса. Несколько рабочих процессов разделяются запятой. Этот ключ можно получить, наведя курсор на название рабочего процесса в верхней части холста рабочего процесса:

![Способ просмотра ключа рабочего процесса](https://static-docs.nocobase.com/20240426135108.png)

После успешного вызова будет запущен соответствующий рабочий процесс утверждения для таблицы `posts`.

:::info{title="Подсказка"}
Так как внешний вызов также требует идентификации пользователя, при вызове через HTTP API, как и при отправке обычных запросов через интерфейс, необходимо предоставлять данные аутентификации, включая заголовок запроса `Authorization` или параметр `token` (полученный при входе в систему), а также заголовок запроса `X-Role` (имя текущей роли пользователя).
:::

Если необходимо запустить события для связанных данных "один-к-одному" (поддержка "один-ко-многим" пока не реализована) в рамках этой операции, можно использовать символ `!` в параметрах для указания данных, которые должны быть использованы для триггера связанного поля:

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' -d \
  '{
    "title": "Hello, world!",
    "content": "This is a test post.",
    "category": {
      "title": "Test category"
    }
  }'
  "http://localhost:3000/api/posts:create?triggerWorkflows=workflowKey!category"
```

После успешного выполнения вышеуказанного вызова будет запущено событие утверждения, связанное с таблицей `categories`.

:::info{title="Подсказка"}
При вызове событий через HTTP API после операций следует также учитывать состояние активации рабочего процесса и настройки соответствия таблицы данных. В противном случае вызов может завершиться неудачей или возникнет ошибка.
:::
