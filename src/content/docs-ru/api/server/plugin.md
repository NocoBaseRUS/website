# Plugin

## Обзор

`Plugin` — это класс плагинов на стороне сервера NocoBase, предоставляющий конфигурационные свойства и методы жизненного цикла, связанные с серверной частью плагинов.

### Базовое использование

```ts
import { Plugin } from '@nocobase/server';

export class PluginDemoServer extends Plugin {}

export default PluginDemoServer;
```

## Свойства экземпляра

### `options`

Конфигурация плагина.

### `name`

`string` — имя плагина.

### `enabled`

`boolean` — включен ли плагин.

### `installed`

`boolean` — установлен ли плагин.

### `log`

Экземпляр системного журнала. Поле `module` по умолчанию выводит имя плагина. См. [Logger](../logger.md).

### `app`

Экземпляр `Application` текущего приложения. См. [Application](./application.md).

### `pm`

Экземпляр `PluginManager` текущего приложения. См. [PluginManager](./plugin-manager.md).

### `db`

Экземпляр `DataBase` текущего приложения. См. [DataBase](../database/index.md).

## Методы жизненного цикла

### `afterAdd()`

Выполняется после добавления плагина, то есть после выполнения [`pm.add()`](./plugin-manager.md#add).

### `beforeLoad()`

Выполняется во время [`pm.load()`](./plugin-manager.md#load). Используется для регистрации событий, инициализации классов или выполнения другой логики предварительной обработки перед загрузкой плагина. На этом этапе можно получить доступ к API ядра, но нельзя получить доступ к API других плагинов.

### `load()`

Загружает плагин и соответствующую конфигурацию. Выполняется после завершения выполнения метода [`beforeLoad()`](#beforeload) всех плагинов во время [`pm.load()`](./plugin-manager.md#load). На этом этапе можно получить доступ к API других плагинов.

### `install()`

Логика установки плагина, выполняемая во время установки или обновления приложения, а также при первом включении плагина. Обычно используется для выполнения таких задач, как вставка предопределенных данных в таблицы базы данных.

### `beforeEnable()`

Выполняется перед включением плагина.

### `afterEnable()`

Выполняется после включения плагина.

### `beforeDisable()`

Выполняется перед отключением плагина.

### `afterDisable()`

Выполняется после отключения плагина.

### `beforeRemove()`

Выполняется перед удалением плагина.

### `afterRemove()`

Выполняется после удаления плагина.

## Другие методы

### `t()`

Метод интернационализации.

### `createLogger()`

Создание логгера. См. [Logger](../logger.md).

### `toJSON()`

Вспомогательный метод. Выводит информацию о конфигурации плагина.