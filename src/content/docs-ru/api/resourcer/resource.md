# Resource

Resource используется для определения экземпляра ресурса. Экземпляры ресурсов, управляемые Resourcer, могут быть доступны через HTTP-запросы.

## Конструктор

Используется для создания экземпляра Resource. Обычно вызывается через интерфейс `define()` менеджера Resourcer, прямое использование не требуется.

**Сигнатура**

- `constructor(options: ResourceOptions, resourcer: Resourcer)`

**Параметры**

| Имя параметра         | Тип                                 | Значение по умолчанию | Описание                                                                                                                                                   |
| --------------------- | ------------------------------------ | ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `options.name`        | `string`                             | -                      | Название ресурса, соответствует части адреса ресурса в URL-маршруте.                                                                                         |
| `options.type`        | `string`                             | `'single'`             | Тип ресурса, возможные значения: `'single'`, `'hasOne'`, `'hasMany'`, `'belongsTo'`, `'belongsToMany'`.                                                    |
| `options.actions`     | `Object`                             | -                      | Список операций, которые могут выполняться с ресурсом, см. примеры ниже.                                                                                     |
| `options.middlewares` | `MiddlewareType \| MiddlewareType[]` | -                      | Список middleware для выполнения любых операций с текущим определенным ресурсом, см. примеры ниже.                                                          |
| `options.only`        | `ActionName[]`                       | `[]`                   | Белый список глобальных операций; когда массив содержит значения (length > 0), доступны только операции из этого массива.                                    |
| `options.except`      | `ActionName[]`                       | `[]`                   | Черный список глобальных операций; когда массив содержит значения (length > 0), доступны все операции, кроме тех, что указаны в этом массиве.                 |
| `resourcer`           | `Resourcer`                          | -                      | Экземпляр менеджера ресурсов.                                                                                                                              |

**Пример**

```ts
app.resourcer.define({
  name: 'books',
  actions: {
    // Расширенное действие
    publish(ctx, next) {
      ctx.body = 'ok';
    },
  },
  middleware: [
    // Расширенный middleware
    async (ctx, next) => {
      await next();
    },
  ],
});
```

## Члены экземпляра

### `options`

Параметры конфигурации текущего ресурса.

### `resourcer`

Экземпляр менеджера ресурсов, к которому принадлежит данный ресурс.

### `middlewares`

Список зарегистрированных middleware.

### `actions`

Таблица соответствия зарегистрированных действий.

### `except`

Список исключений операций.

## Методы экземпляра

### `getName()`

Получить имя текущего ресурса.

**Сигнатура**

- `getName(): string`

**Пример**

```ts
const resource = app.resourcer.define({
  name: 'books',
});

resource.getName(); // 'books'
```

### `getAction()`

Получить операцию текущего ресурса по имени.

**Сигнатура**

- `getAction(name: string): Action`

**Параметры**

| Имя параметра | Тип      | Значение по умолчанию | Описание          |
| -------------- | --------- | ---------------------- | ------------------ |
| `name`         | `string`  | -                      | Название операции. |

**Пример**

```ts
const resource = app.resourcer.define({
  name: 'books',
  actions: {
    publish(ctx, next) {
      ctx.body = 'ok';
    },
  },
});

resource.getAction('publish'); // [Function: publish]
```
