# BaseAuth

## Обзор

`BaseAuth` наследуется от абстрактного класса [Auth](./auth.md) и представляет собой базовую реализацию типа аутентификации пользователя с использованием JWT в качестве метода авторизации. В большинстве случаев для расширения типов аутентификации пользователей можно наследовать `BaseAuth`, и нет необходимости напрямую наследовать абстрактный класс `Auth`.

```ts
class BasicAuth extends BaseAuth {
  constructor(config: AuthConfig) {
    // Установка таблицы данных пользователя
    const userCollection = config.ctx.db.getCollection('users');
    super({ ...config, userCollection });
  }

  // Логика аутентификации пользователя, вызывается через `auth.signIn`
  // Возвращает данные пользователя
  async validate() {
    const ctx = this.ctx;
    const { values } = ctx.action.params;
    // ...
    return user;
  }
}
```

## Методы класса

### `constructor()`

Конструктор, создающий экземпляр `BaseAuth`.

#### Сигнатура

- `constructor(config: AuthConfig & { userCollection: Collection })`

#### Детали

| Параметр         | Тип         | Описание                                                                                             |
| ---------------- | ------------ | ---------------------------------------------------------------------------------------------------- |
| `config`         | `AuthConfig` | См. [Auth - AuthConfig](./auth.md#authconfig)                                                        |
| `userCollection` | `Collection` | Таблица данных пользователя, например: `db.getCollection('users')`, см. [DataBase - Collection](../database/collection) |

### `user()`

Аксессор для установки и получения информации о пользователе. По умолчанию использует объект `ctx.state.currentUser` для хранения и извлечения данных.

#### Сигнатура

- `set user()`
- `get user()`

### `check()`

Выполняет аутентификацию по токену запроса и возвращает информацию о пользователе.

### `signIn()`

Вход пользователя с генерацией токена.

### `signUp()`

Регистрация пользователя.

### `signOut()`

Выход пользователя из системы, токен истекает.

### `validate()` \*

Основная логика авторизации, вызывается интерфейсом `signIn` для определения, может ли пользователь успешно войти в систему.
