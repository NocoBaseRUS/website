# Командная строка

В плагине пользовательские команды должны находиться в директории `src/server/commands/*.ts` плагина со следующим содержимым:

```ts
import { Application } from '@nocobase/server';

export default function(app: Application) {
  app
    .command('echo')
    .option('-v, --version')
    .action(async ([options]) => {
      console.log('Hello World!');
      if (options.version) {
        console.log('Current version:', await app.version.get());
      }
    });
}
```

:::warning
Пользовательские команды плагина вступают в силу только после установки и активации плагина.
:::

Особые настройки Command:

- `ipc()` — когда приложение запущено, команда отправляет инструкции через IPC для управления запущенным экземпляром приложения. Если `ipc()` не настроено, будет создан новый экземпляр приложения, и операция выполнится (без влияния на работающий экземпляр приложения).
- `auth()` — выполняет проверку базы данных; если конфигурация базы данных неверна, команда не будет выполнена.
- `preload()` — определяет, следует ли заранее загружать конфигурацию приложения, то есть выполнять `app.load()`.

Настройки могут быть сконфигурированы в зависимости от реального назначения команды. Пример ниже:

```ts
app.command('a').ipc().action()
app.command('a').auth().action()
app.command('a').preload().action()
```
